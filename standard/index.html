<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue 后台管理系统说明 | 基于Vxe + ElementUI + Echarts业务组件库</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.835e18d2.css" as="style"><link rel="preload" href="/assets/js/app.907759f4.js" as="script"><link rel="preload" href="/assets/js/2.3a15351b.js" as="script"><link rel="preload" href="/assets/js/32.4cec9522.js" as="script"><link rel="prefetch" href="/assets/js/10.b7381189.js"><link rel="prefetch" href="/assets/js/11.1343a390.js"><link rel="prefetch" href="/assets/js/12.b931bca0.js"><link rel="prefetch" href="/assets/js/13.b7b6ffe0.js"><link rel="prefetch" href="/assets/js/14.fde8dc34.js"><link rel="prefetch" href="/assets/js/15.d03ff133.js"><link rel="prefetch" href="/assets/js/16.172d3b9d.js"><link rel="prefetch" href="/assets/js/17.c07b3b2d.js"><link rel="prefetch" href="/assets/js/18.3d8833a0.js"><link rel="prefetch" href="/assets/js/19.94b0abe3.js"><link rel="prefetch" href="/assets/js/20.b393b0f8.js"><link rel="prefetch" href="/assets/js/21.56ed3ea7.js"><link rel="prefetch" href="/assets/js/22.326697d1.js"><link rel="prefetch" href="/assets/js/23.d71ec038.js"><link rel="prefetch" href="/assets/js/24.21d099e5.js"><link rel="prefetch" href="/assets/js/25.59df4e70.js"><link rel="prefetch" href="/assets/js/26.5bd51ed2.js"><link rel="prefetch" href="/assets/js/27.087eb4e1.js"><link rel="prefetch" href="/assets/js/28.89d19c2b.js"><link rel="prefetch" href="/assets/js/29.3807bc7d.js"><link rel="prefetch" href="/assets/js/3.18dcffee.js"><link rel="prefetch" href="/assets/js/30.f59da03f.js"><link rel="prefetch" href="/assets/js/31.4f4aca61.js"><link rel="prefetch" href="/assets/js/33.2781b5e7.js"><link rel="prefetch" href="/assets/js/34.8030f8a2.js"><link rel="prefetch" href="/assets/js/4.36900c2f.js"><link rel="prefetch" href="/assets/js/5.917ab705.js"><link rel="prefetch" href="/assets/js/6.5f0160cf.js"><link rel="prefetch" href="/assets/js/7.fbf0fa25.js"><link rel="prefetch" href="/assets/js/8.7be78af7.js"><link rel="prefetch" href="/assets/js/9.313bc4fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.835e18d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">基于Vxe + ElementUI + Echarts业务组件库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="/standard/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  规范
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="/standard/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  规范
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/standard/" aria-current="page" class="active sidebar-link">后台管理系统说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standard/#前言" class="sidebar-link">前言：</a></li><li class="sidebar-sub-header"><a href="/standard/#一、开发工具和配置" class="sidebar-link">一、开发工具和配置</a></li><li class="sidebar-sub-header"><a href="/standard/#二、运行和打包部署" class="sidebar-link">二、运行和打包部署</a></li><li class="sidebar-sub-header"><a href="/standard/#三、主要技术支持" class="sidebar-link">三、主要技术支持</a></li><li class="sidebar-sub-header"><a href="/standard/#四、目录树" class="sidebar-link">四、目录树</a></li><li class="sidebar-sub-header"><a href="/standard/#五、规范" class="sidebar-link">五、规范</a></li><li class="sidebar-sub-header"><a href="/standard/#六、功能明细" class="sidebar-link">六、功能明细</a></li><li class="sidebar-sub-header"><a href="/standard/#七、git-操作规范" class="sidebar-link">七、git 操作规范</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue 代码规范及优化写法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-后台管理系统说明"><a href="#vue-后台管理系统说明" class="header-anchor">#</a> Vue 后台管理系统说明</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言：</h2> <blockquote><p>开发后台框架须知: 由于页面框架暂时没有演示地址，目前用的长江养老投研绩效的后台 api 地址，下边所叙述的功能框架前端代码已更新，按照文档叙述做开发即可，有问题再沟通。（若在系统上进行修改测试，记得数据要复原，不要影响原系统）</p></blockquote> <blockquote><p>开发系统须知：下列叙述的功能各个系统没有实现统一，开发功能的时候要结合本项目的代码来开发，如果需要此功能的话，去系统框架上进行 copy</p></blockquote> <blockquote><p>框架 git 地址 https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue</p></blockquote> <h2 id="一、开发工具和配置"><a href="#一、开发工具和配置" class="header-anchor">#</a> 一、开发工具和配置</h2> <h3 id="_1-1-开发工具-vscode"><a href="#_1-1-开发工具-vscode" class="header-anchor">#</a> 1.1 开发工具 VsCode</h3> <blockquote><p>官网：https://code.visualstudio.com/docs</p></blockquote> <blockquote><p>一个比较详细的教程：
https://geek-docs.com/vscode/vscode-tutorials/introduction-to-vscode.html</p></blockquote> <blockquote><p>设置背景颜色的：https://jingyan.baidu.com/article/fdbd42773cef93f99f3f4823.html</p></blockquote> <blockquote><p>统一格式化插件选用 Prettier - Code formatter，需所有开发人员统一</p></blockquote> <h3 id="_1-2-统一-setting-json-文件配置"><a href="#_1-2-统一-setting-json-文件配置" class="header-anchor">#</a> 1.2 统一 setting.json 文件配置</h3> <div class="language- extra-class"><pre class="language-text"><code>// todo...
</code></pre></div><h3 id="_1-3-统一-eslintrc-js-文件配置"><a href="#_1-3-统一-eslintrc-js-文件配置" class="header-anchor">#</a> 1.3 统一 .eslintrc.js 文件配置</h3> <div class="language- extra-class"><pre class="language-text"><code>// todo...
</code></pre></div><h3 id="_1-4-统一忽略文件配置-eslintignore-gitignore"><a href="#_1-4-统一忽略文件配置-eslintignore-gitignore" class="header-anchor">#</a> 1.4 统一忽略文件配置 .eslintignore / .gitignore</h3> <div class="language- extra-class"><pre class="language-text"><code>// todo...
</code></pre></div><h3 id="_1-5-统一-npmrc-源地址"><a href="#_1-5-统一-npmrc-源地址" class="header-anchor">#</a> 1.5 统一 .npmrc 源地址</h3> <div class="language- extra-class"><pre class="language-text"><code>// todo...
</code></pre></div><h2 id="二、运行和打包部署"><a href="#二、运行和打包部署" class="header-anchor">#</a> 二、运行和打包部署</h2> <h3 id="_2-1-环境配置"><a href="#_2-1-环境配置" class="header-anchor">#</a> 2.1 环境配置</h3> <blockquote><p>https://nodejs.org/en/download/ node js 官网下载，会自动配置 npm</p></blockquote> <blockquote><p>node，npm 版本不同暂时没有发现问题（有同事用高版本的 node 发布 ddportal-ui 的包出过问题，暂时不确定是否是版本的问题）</p></blockquote> <blockquote><p>和目前本地的版本保持一致，node：8.11.3 / npm：6.11.3</p></blockquote> <blockquote><p>同一个项目本地环境的 node 版本不一致的话，node_modules 不可相互复制；如果本地开发环境更新了 node 版本，对应的 node_modules 也要重新下载，不然会报兼容性问题</p></blockquote> <h3 id="_2-2-下载依赖指令-npm-install"><a href="#_2-2-下载依赖指令-npm-install" class="header-anchor">#</a> 2.2 下载依赖指令 npm install</h3> <blockquote><p>注意：下载 npm 包的时候是根据系统里边的.npmrc 文件指定的下载地址来下载的</p></blockquote> <blockquote><p>http://192.168.1.21:8081/repository/npm-public/ （公司内网）</p></blockquote> <blockquote><p>http://vip.datadriver.com.cn:8082/repository/npm-public/（公司外网）</p></blockquote> <blockquote><p>下载失败可能的原因：</p> <ol><li>网速问题导致包没有下载完全导致报错，重新执行 npm install 下载还不行的话，再删除 node_modules 目录重新下载试试</li> <li>其他问题自行百度解决，无法解决的问下对应的前端开发人员</li></ol></blockquote> <h3 id="_2-3-运行指令-npm-run-dev"><a href="#_2-3-运行指令-npm-run-dev" class="header-anchor">#</a> 2.3 运行指令 npm run dev</h3> <blockquote><p>注：ip 运行，可以让其他开发者访问你的本地开发环境</p></blockquote> <img src="/host.png" alt="host"> <blockquote><p>localhost 本地启动，其他开发者无法访问你的开发环境</p></blockquote> <h3 id="_2-4-打包指令"><a href="#_2-4-打包指令" class="header-anchor">#</a> 2.4 打包指令</h3> <blockquote><p>项目打包步骤（删除之前的 dist 目录，不然可能会出现更新问题）</p> <ol><li><p>确定 .npmrc 文件里边配置如下，公司内网环境打包</p> <p>registry=&quot;http://192.168.1.21:8081/repository/npm-public/&quot; 2.公司外网环境</p> <p>registry=&quot;http://vip.datadriver.com.cn:8082/repository/npm-public/&quot;</p></li> <li><p>拉取代码，下载更新 npm install ddportal-ui@1.0.0（pc 端需要的话就更新，pad 端暂时不需要）</p> <p>确保代码无误可运行，以及最新的功能已经更新 （项目存在其他私有前端包也要更新）</p></li> <li><p>确定是否需要采用外部系统登录跳转到本系统的形式(长江养老投研绩效系统)</p> <p>需修改 src=&gt;store =&gt; modules =&gt; setting.js 里边的
backendLogin 是否后端登录 true or false</p> <p>backendLoginUrl 外部系统登录跳转地址</p></li> <li><p>修改打包地址</p> <p>config =&gt; prod.env.js BASE_API 变量修改为服务器端请求地址</p> <p>config =&gt; sit.env.js 此文件为测试环境打包 暂时无用
配置方式</p> <p>1.绝对路径 http://vip.datadriver.com.cn:9062/iamac/rest</p> <p>2.相对路径 ./rest</p> <p>备注：如页面访问地址为http://vip.datadriver.com.cn:9062/iamac/#/dashboard，则相对路径会自动添加http://vip.datadriver.com.cn:9062/iamac/ 的内容</p></li></ol></blockquote> <h3 id="_2-5-公司环境部署"><a href="#_2-5-公司环境部署" class="header-anchor">#</a> 2.5 公司环境部署</h3> <h4 id="_2-5-1-部署-203-服务器"><a href="#_2-5-1-部署-203-服务器" class="header-anchor">#</a> 2.5.1 部署 203 服务器</h4> <blockquote><p>地址：http://192.168.1.202:9090/jenkins/<br>
账号密码： datadriver  datadriver</p></blockquote> <blockquote><ol><li>新建一个任务</li></ol></blockquote> <img src="/jenkins.png" alt="jenkins"> <blockquote><ol start="2"><li>名字命名规则 wy_ fund + 项目名称 + vue 示例: wy_fund-iamac-vue 下边的是从哪个项目复制过来的（直接写项目名称） 方便修改后边的打包命令</li></ol></blockquote> <img src="/newTask.png" alt="newTask"> <blockquote><ol start="3"><li>Git 地址换一下</li></ol></blockquote> <img src="/jenkinsGit.png" alt="jenkinsGit"> <blockquote><ol start="4"><li>修改路径为访问的路径就可以了，可以测试下，打包结构不一样的需要另外配置，例: 如http://vip.datadriver.com.cn:9062/cjyl-dev/ 路径就为 cjyl-dev<br>
访问地址为： http://vip.datadriver.com.cn:9062/ + 打包路径（上边红框里边的路径）</li></ol></blockquote> <img src="/jenkinsPath.png" alt="jenkinsPath"> <blockquote><p>203 服务器自动部署注意事项：</p> <ol><li><p>删除项目的 ddportal-ui，目的是重新拉取 ddportal-ui 包，也可以执行 npm install ddportal-ui@1.0.0命令， dist 是项目打包文件</p></li> <li><p>npm install // 下载</p></li> <li><p>npm run build:prod // 打包</p></li></ol></blockquote> <h4 id="_2-5-1-1-服务器端公司私有-npm-包更新失败"><a href="#_2-5-1-1-服务器端公司私有-npm-包更新失败" class="header-anchor">#</a> 2.5.1.1 服务器端公司私有 npm 包更新失败</h4> <blockquote><p>解决方案：</p> <ol><li><p>添加这个下载私有包的命令 例如：npm install ddrisk-ui@1.0.0 那个包更新不了就写那个</p> <img src="/npmError.png" alt="npmError"> <img src="/npmError2.png" alt="npmError2"></li> <li><p>如果这样可以了，那就行了，如果还不行报如下错误，添加命令 npm cache clean --force 试下，就可以了</p> <img src="/npmCache.png" alt="npmCache"> <img src="/npmCache2.png" alt="npmCache2"></li></ol></blockquote> <h4 id="_2-5-2-部署-204-服务器"><a href="#_2-5-2-部署-204-服务器" class="header-anchor">#</a> 2.5.2 部署 204 服务器</h4> <ul><li><ol><li>首次部署的做法：</li></ol></li></ul> <ul><li>（1）修改 dev.env.js 的访问地址为 204 服务器请求地址</li> <li>（2）打压缩包给后端开发人员即可（包括 node_modules 和 package.json ）</li> <li>（3）直接运行 npm run dev 即可</li></ul> <img src="/204server.png" alt="204server"> <ul><li><ol start="2"><li>后边部署更新的做法</li></ol></li></ul> <ul><li>（1）一般只需要更新 src 文件夹即可</li> <li>（2）如果有 ddportal-ui 包的更新或者其他 npm 包的更新也要发 npm 包给后端开发人员</li> <li>（3）直接复制 node_modules 需要确保两边的 node 环境一致，不一致可能会出现如下错误，解决办法就是在服务器上重新下载这个包，或者不发 node_modules 包，直接在服务器上执行 npm install 即可</li></ul> <img src="/nodeSass.png" alt="nodeSass"> <blockquote><ol><li>修改 npmsrc 文件地址为外网 （内网在服务器上下载不了，比较奇怪）</li></ol></blockquote> <img src="/npmReg.png" alt="npmReg"> <blockquote><ol start="2"><li>执行 npm rebuild node-sass 命令</li></ol></blockquote> <img src="/sassRebuild.png" alt="sassRebuild"> <h4 id="_204-服务器端管理界面登录方式"><a href="#_204-服务器端管理界面登录方式" class="header-anchor">#</a> 204 服务器端管理界面登录方式</h4> <blockquote><p>访问远程桌面 mstsc</p></blockquote> <img src="/204long.png" alt="204long"> <blockquote><p>IP 地址： 192.168.1.204
账号密码：administrator / data68868569</p></blockquote> <h2 id="三、主要技术支持"><a href="#三、主要技术支持" class="header-anchor">#</a> 三、主要技术支持</h2> <blockquote><p>vue.js（2.5.17） https://cn.vuejs.org/<br>
vue element admin https://panjiachen.github.io/vue-element-admin-site/zh/<br>
element UI https://element.eleme.io/#/zh-CN</p></blockquote> <h2 id="四、目录树"><a href="#四、目录树" class="header-anchor">#</a> 四、目录树</h2> <div class="language- extra-class"><pre class="language-text"><code>├── build # 构建相关
├── config # 项目打包配置
├── node_modules # npm 依赖资源
├── src # 源代码
│ ├── api # 所有请求
│ │ ├── template # 请求示例
│ ├── assets # 主题 字体等静态资源
│ ├── components # 全局公用组件
│ ├── directive # 全局指令
│ ├── filters # 全局 filter
│ ├── icons # 项目所有 svg icons
│ ├── lang # 国际化 language
│ ├── mock # 模拟数据
│ ├── router # 路由
│ ├── store # 全局 store 管理
│ ├── styles # 全局样式
│ ├── utils # 全局公用方法
│ ├── vendor # 公用 vendor 第三方库
│ ├── views # views 所有页面
│ │ ├── errorPage # 报错提示页面
│ │ ├── home # 项目首页
│ │ ├── layout # 页面主体布局
│ │ ├── login # 登录页面
│ │ ├── loginBack # 其它途径登录系统页面
│ │ ├── permission # 前端控制权限实例
│ │ ├── ping # 项目部署成功后 pin 的路由 根路径 + /ping
│ │ ├── redirect # 路由重定向
│ │ ├── responseStatus # 后台报错指向页面 根路径 + /responseStatus?status=401
│ │ ├── setting # 系统设置页面
│ │ ├── template # 系统模板
│ │ │ ├── template # 页面请求接口示例
│ │ │ │ ├── templateSeparate # 页面 css、js、vue 分离写法
│ ├── App.vue # 入口页面
│ ├── main.js # 入口文件 加载组件 初始化等
│ └── permission.js # 权限管理 路由切换前所做的处理
├── .eslintrc.js # eslint 配置项
├── .npmrc # npm 包下载地址
├── index.html # 项目主页面
├── .babelrc # babel-loader 配置 es6 语法转化
└── package.json # npm 包配置文件
</code></pre></div><h2 id="五、规范"><a href="#五、规范" class="header-anchor">#</a> 五、规范</h2> <h3 id="_5-1-页面规范"><a href="#_5-1-页面规范" class="header-anchor">#</a> 5.1 页面规范</h3> <blockquote><ol><li>如果页面代码量较小，采用 views =》template 文件夹下 template.vue 的写法；如果页面代码量较多，就采用 views =》template =》templateSeparate 文件夹下 scss、js、vue 文件分离的形式<br>
参考：https://blog.csdn.net/weixin_30593443/article/details/97817798</li> <li>页面代码尽可能多调用组件和方法，备注写清晰，结构清晰</li> <li>页面兼容最小分辨率为 1344*768，目前主要兼容谷歌浏览器即可</li></ol></blockquote> <h3 id="_5-2-配置文件"><a href="#_5-2-配置文件" class="header-anchor">#</a> 5.2 配置文件</h3> <blockquote><p>package.json 文件如有修改，需要通知协同开发的同事更新包或下载包或删除包</p></blockquote> <h3 id="_5-3-增删改查"><a href="#_5-3-增删改查" class="header-anchor">#</a> 5.3 增删改查</h3> <blockquote><p>参考长江养老投研绩效系统的券商佣金 =&gt; 券商信息维护 页面进行开发<br>
前端访问：http://vip.datadriver.com.cn:9062/cjyl-dev/<br>
项目 git 地址：https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-invet-web.git</p></blockquote> <h2 id="六、功能明细"><a href="#六、功能明细" class="header-anchor">#</a> 六、功能明细</h2> <h3 id="_6-1-ddportal-ui-npm-包-公司私有"><a href="#_6-1-ddportal-ui-npm-包-公司私有" class="header-anchor">#</a> 6.1 ddportal-ui npm 包（公司私有）</h3> <blockquote><p>Git 地址 https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-vue-ui-risk</p></blockquote> <h4 id="_6-1-1-公司-npm-服务器访问地址"><a href="#_6-1-1-公司-npm-服务器访问地址" class="header-anchor">#</a> 6.1.1 公司 npm 服务器访问地址</h4> <blockquote><p>http://192.168.1.21:8081/repository/npm-public/<br>
http://vip.datadriver.com.cn:8082/repository/npm-public/</p></blockquote> <h4 id="_6-1-2-公司推送包步骤"><a href="#_6-1-2-公司推送包步骤" class="header-anchor">#</a> 6.1.2 公司推送包步骤</h4> <ul><li>注意事项</li></ul> <ul><li><ol><li>更新最新代码，确认功能无误，保证不影响其他项目的情况下再打包</li></ol></li> <li><ol start="2"><li>. npmsrc 文件根据需要修改，不要提交</li></ol></li> <li><ol start="3"><li>由于各个项目公用此组件的原因，不要随意改变系统管理等模块的代码，打包完成后要通知对应项目组进行包的更新</li></ol></li> <li><ol start="4"><li>更新代码要注意一个问题，只更新前端没问题，但前端和后台同时更新了，就要注意下该系统后台是否更新了，是否有影响，会报错等</li></ol></li></ul> <blockquote><p>执行 npm run lib 打包，生成如下文件即为成功</p></blockquote> <img src="/npmlib.png" alt="npmlib"> <blockquote><p>如 npm run lib 打包报以下错误</p></blockquote> <img src="/buildError.png" alt="buildError"> <blockquote><p>解决办法：https://blog.csdn.net/lucky_Zeng/article/details/108622002</p></blockquote> <ul><li>修改 .npmsrc 文件地址如下</li> <li>然后执行 npm config get registry 确认发包地址为内网或外网（可以省略）
<ul><li>内网：http://192.168.1.21:8081/repository/npm-hosted/</li> <li>外网：http://vip.datadriver.com.cn:8082/repository/npm-hosted/</li></ul></li></ul> <img src="/npmsrc.png" alt="npmsrc"> <blockquote><p>npm login 输入用户名密码 datadriver datadriver</p></blockquote> <blockquote><p>npm publish 发包成功界面如下</p></blockquote> <img src="/publish.png" alt="publish"> <blockquote><p>Ps: 发布版本可以重复，目前只能是 1.0.0 版本</p></blockquote> <h4 id="_6-1-3-下载-npm-包地址"><a href="#_6-1-3-下载-npm-包地址" class="header-anchor">#</a> 6.1.3 下载 npm 包地址</h4> <blockquote><ol><li>外网：http://vip.datadriver.com.cn:8082/repository/npm-public/</li> <li>内网：http://192.168.1.21:8081/repository/npm-public/</li></ol></blockquote> <h4 id="_6-1-4-常用地址切换"><a href="#_6-1-4-常用地址切换" class="header-anchor">#</a> 6.1.4 常用地址切换</h4> <blockquote><p>切换.npmrc 文件的路径即可</p></blockquote> <img src="/changeNpmrc.png" alt="changeNpmrc"> <h3 id="_6-2-包引入"><a href="#_6-2-包引入" class="header-anchor">#</a> 6.2 包引入</h3> <h4 id="_6-2-1-改变-npm-仓库地址"><a href="#_6-2-1-改变-npm-仓库地址" class="header-anchor">#</a> 6.2.1 改变 npm 仓库地址</h4> <blockquote><ol><li>改变仓库地址到公司: 修改.npmrc 文件（这个文件是把项目的 npm 下载路径指向为文件配置的内容，不受 npm config set 的影响）</li> <li>npm install ddportal-ui@1.0.0 （公司库里边存在一个 1.0.1 的版本，没用） 每次更新包都是这个命令</li> <li>添加配置到 main.js 里 （和 element ui 位置一样）</li></ol></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import DdportalUI from 'ddportal-ui'
import 'ddportal-ui/lib/ddportal-ui.css'
Vue.use(DdportalUI)
</code></pre></div><blockquote><p>备注：现在的包为公司私有服务器上的 npm 包<br>
只能通过http://192.168.1.21:8081/repository/npm-public/ 或 http://vip.datadriver.com.cn:8082/repository/npm-public/ 下载<br>
开发项目需要 npm install 更新下载包（比如 element ui），目前都是是默认通过公司服务器下载（公司服务器没有的服务器会自动从公网下载）</p></blockquote> <h4 id="_6-2-2-store-setting-js-添加变量-已存在忽略此步骤"><a href="#_6-2-2-store-setting-js-添加变量-已存在忽略此步骤" class="header-anchor">#</a> 6.2.2 store/setting.js 添加变量，已存在忽略此步骤</h4> <div class="language- extra-class"><pre class="language-text"><code>// 添加 baseApi 变量, 后端请求地址
baseApi: process.env.BASE_API,
</code></pre></div><h4 id="_6-2-3-引入嵌套页面"><a href="#_6-2-3-引入嵌套页面" class="header-anchor">#</a> 6.2.3 引入嵌套页面</h4> <blockquote><p>相关组件名称可以去 ddportal-ui 开发环境里边获取<br>
https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-vue-ddui<br>
示例：框架里边的 ETL 菜单<br>
https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue</p></blockquote> <img src="/ddUI.png" alt="ddUI"> <h4 id="_6-2-4-切换下载源到-npm-或淘宝镜像的命令"><a href="#_6-2-4-切换下载源到-npm-或淘宝镜像的命令" class="header-anchor">#</a> 6.2.4 切换下载源到 npm 或淘宝镜像的命令</h4> <blockquote><p>1.修改.npmrc 文件指向的下载路径为 https://registry.npm.taobao.org  或 http://registry.npmjs.org/</p></blockquote> <h3 id="_6-3-菜单配置"><a href="#_6-3-菜单配置" class="header-anchor">#</a> 6.3 菜单配置</h3> <h4 id="_6-3-1-通配"><a href="#_6-3-1-通配" class="header-anchor">#</a> 6.3.1 通配</h4> <ul><li>ID: 不能重复</li> <li>id 配置规则：</li> <li>一级菜单为 0,1,2,3,4,5,6</li> <li>二级菜单为：以父级为 1 的作为示例 101 102 103</li> <li>三级菜单为：以父级为 101 的作为示例 10101 10102 10103</li> <li>......
<ul><li>排序字段：不是按照大小排序，按照第一个数字、第二个数字等 0-9 进行排序</li> <li>菜单名称：正常写</li></ul></li> <li>菜单编码：菜单的编码标识，无特殊需求的话，只配置个 MENU.PORTAL 即可（如果页面出现 name 值的警告，需要将菜单编码值设置成唯一的）</li> <li>1.是权限设置的，配置方法参考 4.6</li> <li>2.和页面缓存功能相关的 ，需要参考本文档的 4.5 ，此功能路由多级（二级以上）页面、公用页面和嵌套外部系统页面存在缓存不了的问题，暂未解决，不要使用
<ul><li>图标文件：对应前端开发代码内 src =&gt; icons =&gt; svg 的内容</li> <li>菜单类型：PAGE.PERMISSION.TYPE.MU 为菜单类型 * PAGE.PEISSIORMN.TYPE.BT 为按钮类型 配置按钮权限的</li></ul></li> <li>PAGE.PEISSIORMN.TYPE.RESOURCE 暂未使用</li> <li>状态：启用 禁用 只遍历启用的</li> <li>远程访问本系统：本系统（暂时无用，之前是 jsp 页面框架在系统间相互嵌套时有用）</li> <li>菜单加载模式：内部链接 外部链接（嵌套外部页面选择外部链接选项）</li> <li>菜单分组编码：暂时无用</li> <li>备注：页面地址 添加方法参考以下单个菜单，多级菜单的详细内容</li> <li>URL： 必填（原因是不写容易造成路由重复，以及项目代码如果不写路由地址的话可能会报错） 添加方法参考以下单个菜单，多级菜单的详细内容</li></ul> <h4 id="_6-3-2-单个菜单"><a href="#_6-3-2-单个菜单" class="header-anchor">#</a> 6.3.2 单个菜单</h4> <blockquote><p>备注字段就是页面地址<br>
单个菜单需要配置该页面的页面地址 从 views 开始， URL 配置示例： /routerPage （一个单词，同级别的不要重复，前边加斜杠）</p></blockquote> <img src="/MENU.png" alt="MENU"> <h4 id="_6-3-3-多级菜单"><a href="#_6-3-3-多级菜单" class="header-anchor">#</a> 6.3.3 多级菜单</h4> <blockquote><p>多级菜单的根路由无需配置页面地址 URL 配置示例： /routerPage （一个单词，同级别的不要重复，前边加斜杠）</p></blockquote> <img src="/menuMore.png" alt="menuMore"> <blockquote><p>多级菜单的子级菜单还存在子级页面的如下配置 页面地址统一为<br>
views/routerPage/index URL 配置示例：routerPage （单个单词，不加斜杠，同级别不要重复）</p></blockquote> <img src="/routerPage.png" alt="routerPage"> <blockquote><p>多级菜单的子级菜单没有子级的如下配置 页面地址为该路由下边的 vue 页面地址 从 views 开始，URL 配置示例：routerPage （单个单词，不加斜杠，同级别不要重复）</p></blockquote> <img src="/roternoChild.png" alt="roternoChild"> <h4 id="_6-3-4-jsp-页面嵌套"><a href="#_6-3-4-jsp-页面嵌套" class="header-anchor">#</a> 6.3.4 jsp 页面嵌套</h4> <blockquote><p>Ps: 配置成功，本地打开可能会跨域，线上没问题</p></blockquote> <blockquote><p>1.jsp 页面嵌套:<br>
配置 jsp  页面就统一前边加  jspPage  标识，<br>
多级菜单示例：jspPage/rest/edimExt/edimList.do （ps：/rest/edimExt/edimList.do 加上页面请求的根地址就是 jsp 页面对应的地址，逻辑可以看 views =&gt; department &gt;下边的内容 ，父级路由参考上边的说明写就可以）<br>
单个菜单示例：/jspPage/rest/edimExt/edimList.do?depe=1<br>
页面地址就是固定的 views/setting/department<br>
示例：</p></blockquote> <img src="/jsp.png" alt="jsp"> <h4 id="_6-3-5-外部链接"><a href="#_6-3-5-外部链接" class="header-anchor">#</a> 6.3.5 外部链接</h4> <p>配置方法：</p> <ul><li>1.菜单加载模式选择外部链接，</li> <li>2.页面地址 固定的 views/setting/outerPage，</li> <li>3.配置两个参数   第一个是 isNeedLogin  是否需要登录  true or false ，后边 url  是外部链接地址，前边的 outerPage 是路由，配置一个单词就可以了，菜单同级的话不要重复，一级路由记得加  / ，具体逻辑可以参考对应的代码</li> <li>outerPage?isNeedLogin=true&amp;url=http://10.248.27.83:8075/WebReport/ReportServer?op=f</li></ul> <img src="/link.png" alt="link"> <blockquote><p>ps: 页面存在&amp; 符号的问题导致出不来页面的，联系对应的后端开发人员解决</p></blockquote> <img src="/linktest.png" alt="linktest"> <h4 id="_6-3-6-点击某个菜单-打开浏览器新的-tab-页显示这个页面"><a href="#_6-3-6-点击某个菜单-打开浏览器新的-tab-页显示这个页面" class="header-anchor">#</a> 6.3.6 点击某个菜单，打开浏览器新的 tab 页显示这个页面</h4> <blockquote><p>部分系统此菜单页面比较重要，需要单独展示等</p></blockquote> <blockquote><p>如果使用此功能需要确认以下代码，看提交记录即可<br>
https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue/commit/a2cb2c51e5d1949415bbb7a42b9f23aacfbfd549</p></blockquote> <img src="/blank.png" alt="blank"> <blockquote><ol><li>系统 vue 页面，在 URL 后边添加 -targetBlank 即可</li></ol></blockquote> <img src="/blankvue.png" alt="blankvue"> <blockquote><ol start="2"><li>系统嵌套的 jsp 页面 在链接参数上添加 targetBlank=targetBlank 即可</li></ol></blockquote> <img src="/blankjsp.png" alt="blankjsp"> <blockquote><ol start="3"><li>外部链接页面 在参数前边的路由地址里边添加 -targetBlank 即可</li></ol></blockquote> <img src="/blanklink.png" alt="blanklink"> <blockquote><ol start="4"><li>如果新打开的 tab 页需要隐藏菜单打开</li></ol></blockquote> <img src="/hidenpage.png" alt="hidenpage"> <blockquote><ol start="5"><li>修改浏览器 tab 页名称</li></ol></blockquote> <img src="/tabname.png" alt="tabname"> <blockquote><p>需添加如下代码，屏蔽代码放开即可<br>
https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue/commit/bace093e828f082e7047622f15a69894a88e9672</p></blockquote> <h3 id="_6-4-本系统页面被其他系统框架嵌套"><a href="#_6-4-本系统页面被其他系统框架嵌套" class="header-anchor">#</a> 6.4 本系统页面被其他系统框架嵌套</h3> <ul><li><p>目的: 其他系统需要嵌套本系统的页面做展示</p></li> <li><p>实现方式: 例: http://vip.datadriver.com.cn:9062/etl/#/ddportal/ddMenu?token=</p></li> <li><p>token 就是当前系统登录的 token</p></li> <li><p>描述: 如果使用此功能需要确认以下代码</p></li></ul> <img src="/nest1.png" alt="nest1"> <img src="/nest2.png" alt="nest1"> <img src="/nest3.png" alt="nest1"> <img src="/nest4.png" alt="nest1"> <h3 id="_6-5-登录配置"><a href="#_6-5-登录配置" class="header-anchor">#</a> 6.5 登录配置</h3> <blockquote><p>登录跳转页面之前为固定的，现在修改为动态获取后端返回路由菜单的第一个页面，可参考<br>
https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue/commit/bd7b06149869330f6af736f8d3a4db7f16dc27e7 这个提交记录对项目进行修改<br>
Ps: 登录跳转的页面也可以指定，然后登录后就跳转此页面，和系统管理的首页配置相关，暂未开发</p></blockquote> <h3 id="_6-6-页面缓存"><a href="#_6-6-页面缓存" class="header-anchor">#</a> 6.6 页面缓存</h3> <ol><li><p>store =&gt; modules =&gt; setting.js 下的 pagesCache 变量 默认为 2</p> <ul><li><ol><li>关闭页面顶部的 tabs 菜单清除缓存，切换 tabs 菜单保持缓存
<ul><li>此功能路由多级（二级以上）页面、公用页面和嵌套外部系统页面存在缓存不了的问题，暂未解决，不要使用</li> <li>可能有用的解决方案 https://juejin.cn/post/6895228036342513672</li></ul></li></ol></li> <li><ol start="2"><li>所有页面都缓存</li></ol></li> <li><ol start="3"><li>所有页面都不缓存</li></ol></li></ul></li> <li><p>关闭页面顶部的 tabs 菜单清除缓存，切换 tabs 菜单保持缓存   目前的配置：<br>
设置菜单编码的值和页面 name 的值保持一致，配置一个不重复的英文即可（菜单编码不要重复，重复会有警告，比如框架里边就有警告）</p></li></ol> <img src="/cache1.png" alt="cache1"> <img src="/cache2.png" alt="cache2"> <h3 id="_6-7-权限设置"><a href="#_6-7-权限设置" class="header-anchor">#</a> 6.7 权限设置</h3> <blockquote><ol><li>菜单如何配置
除了红字描述的，其他的按照 6.2 的菜单配置正常配置即可</li></ol></blockquote> <img src="/auth.png" alt="auth"> <blockquote><p>2.使用方法<br>
（1）自定义指令： v-btn = &quot;'MENU.PORTAL'&quot; MENU.PORTAL 为菜单编码<br>
备注：此方式对于控制 tabs 选项卡的权限设置有问题，可以使用方法 2 解决<br>
（2）调用公共方法： v-if = &quot;this.$fun.btnsAuthority('MENU.PORTAL')&quot; MENU.PORTAL 为菜单编码<br>
使用方法 2 要确认下<br>
https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue/commit/d16629efe7e302038db531d780377409a1166050 ，以上代码项目里边是否存在，不存在要手动同步下再使用</p></blockquote> <h3 id="_6-8-新建项目"><a href="#_6-8-新建项目" class="header-anchor">#</a> 6.8 新建项目</h3> <blockquote><ol><li>从https://git.datadriver-inc.com/org-fund-foms/datadriver-fund-web-vue 项目里边复制以下文件到新建项目的 git 地址下，点击执行 datadriver-web.bat 文件，iOS 系统执行 datadrvier-web.sh 文件即可</li></ol></blockquote> <img src="/create.png" alt="create"> <blockquote><ol start="2"><li>npm install 下载依赖</li> <li>配置文件修改</li></ol></blockquote> <img src="/api.png" alt="api"> <img src="/title.png" alt="title"> <img src="/setting.png" alt="setting"> <img src="/logo.png" alt="logo"> <h2 id="七、git-操作规范"><a href="#七、git-操作规范" class="header-anchor">#</a> 七、git 操作规范</h2> <h3 id="_1-分支管理"><a href="#_1-分支管理" class="header-anchor">#</a> 1. 分支管理</h3> <ul><li>主分支 master ( 与线上版本保持绝对一致，确保 master 分支稳定性 ）</li> <li>预发布分支 release ( 每一次开发完成之后，从 develop 创建出来的分支，以此分支为基准，进行测试 )</li> <li>持续开发分支 develop ( 这个分支维护了当前开发中代码的主线 )</li></ul> <h3 id="_2-commit-代码提交信息"><a href="#_2-commit-代码提交信息" class="header-anchor">#</a> 2. commit 代码提交信息</h3> <p>git commit 杜绝无意义的提交，方便追踪代码</p> <div class="special_table"><table><thead><tr><th>type</th> <th>描述</th></tr></thead> <tbody><tr><td>feat</td> <td>新功能的开发</td></tr> <tr><td>fix</td> <td>bug 的修复</td></tr> <tr><td>docs</td> <td>文档格式的改动</td></tr> <tr><td>style</td> <td>样式代码格式改变</td></tr> <tr><td>perf</td> <td>性能优化</td></tr> <tr><td>chore</td> <td>其他修改, 比如构建流程, 依赖管理、版本号修正</td></tr></tbody></table></div> <h3 id="_3-代码提交频率"><a href="#_3-代码提交频率" class="header-anchor">#</a> 3. 代码提交频率</h3> <ul><li>按模块完成程度提交，如果当天完成了 3 个模块，那就在每个模块完成之后提交当前模块</li> <li>禁止一下子提交若干功能不相干的代码模块</li> <li>严禁一整天/N 天不提代码，可以拆分子功能点，阶段性提交代码</li></ul> <h3 id="_4-git-commit-信息细化"><a href="#_4-git-commit-信息细化" class="header-anchor">#</a> 4. git commit 信息细化</h3> <ul><li><p>当做一个比较大的模块的时候，例如需要三天完成，也是需要每天至少提交一次代码的</p></li> <li><p>不允许每次提交的信息均为 feat:xxx 模块，这样也不利于代码追踪</p></li> <li><p>有两种提交建议如下</p> <ol><li><p>前端开发 50%、前端开发完成、接口联调 30%、接口联调 80%、接口联调 100%……如此的步骤+百分比的信息提交方式</p></li> <li><p>按大模块-子模块信息提交</p></li></ol></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/standard/code-lint.html">
        代码规范
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.907759f4.js" defer></script><script src="/assets/js/2.3a15351b.js" defer></script><script src="/assets/js/32.4cec9522.js" defer></script>
  </body>
</html>
